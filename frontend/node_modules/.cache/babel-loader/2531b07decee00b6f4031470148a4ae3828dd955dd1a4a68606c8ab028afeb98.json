{"ast":null,"code":"import getPerson from './findPerson.js';\nimport getThey from './findThey.js';\n// import getIt from './findIt.js'\nimport { prevSentence } from './lib.js';\nconst addReference = function (pron, m) {\n  if (m && m.found) {\n    // add reference on the pronoun\n    let term = pron.docs[0][0]; //pronouns are 1 word only\n    term.reference = m.ptrs[0];\n  }\n};\nconst stepBack = function (m, cb) {\n  // 1st - in same sentence\n  let s = m.before();\n  let res = cb(s);\n  if (res.found) {\n    return res;\n  }\n  // 2nd - previous sentence\n  s = prevSentence(m);\n  res = cb(s);\n  if (res.found) {\n    return res;\n  }\n  // 3rd - two sentences back\n  s = prevSentence(s);\n  res = cb(s);\n  if (res.found) {\n    return res;\n  }\n  return m.none();\n};\nconst coreference = function (view) {\n  let pronouns = view.pronouns().if('(he|him|his|she|her|hers|they|their|theirs|it|its)');\n  pronouns.forEach(pron => {\n    let res = null;\n    // connect pronoun to its reference\n    if (pron.has('(he|him|his)')) {\n      res = stepBack(pron, m => getPerson(m, 'm'));\n    } else if (pron.has('(she|her|hers)')) {\n      res = stepBack(pron, m => getPerson(m, 'f'));\n    } else if (pron.has('(they|their|theirs)')) {\n      res = stepBack(pron, getThey);\n    }\n    if (res && res.found) {\n      addReference(pron, res);\n    }\n  });\n};\nexport default coreference;","map":{"version":3,"names":["getPerson","getThey","prevSentence","addReference","pron","m","found","term","docs","reference","ptrs","stepBack","cb","s","before","res","none","coreference","view","pronouns","if","forEach","has"],"sources":["/Users/seojuyoung/sunic/project/frontend/node_modules/compromise/src/3-three/coreference/compute/index.js"],"sourcesContent":["import getPerson from './findPerson.js'\nimport getThey from './findThey.js'\n// import getIt from './findIt.js'\nimport { prevSentence } from './lib.js'\n\nconst addReference = function (pron, m) {\n  if (m && m.found) {\n    // add reference on the pronoun\n    let term = pron.docs[0][0]//pronouns are 1 word only\n    term.reference = m.ptrs[0]\n  }\n}\n\nconst stepBack = function (m, cb) {\n  // 1st - in same sentence\n  let s = m.before()\n  let res = cb(s)\n  if (res.found) {\n    return res\n  }\n  // 2nd - previous sentence\n  s = prevSentence(m)\n  res = cb(s)\n  if (res.found) {\n    return res\n  }\n  // 3rd - two sentences back\n  s = prevSentence(s)\n  res = cb(s)\n  if (res.found) {\n    return res\n  }\n  return m.none()\n}\n\nconst coreference = function (view) {\n  let pronouns = view.pronouns().if('(he|him|his|she|her|hers|they|their|theirs|it|its)')\n  pronouns.forEach(pron => {\n    let res = null\n    // connect pronoun to its reference\n    if (pron.has('(he|him|his)')) {\n      res = stepBack(pron, (m) => getPerson(m, 'm'))\n    } else if (pron.has('(she|her|hers)')) {\n      res = stepBack(pron, (m) => getPerson(m, 'f'))\n    } else if (pron.has('(they|their|theirs)')) {\n      res = stepBack(pron, getThey)\n    }\n    if (res && res.found) {\n      addReference(pron, res)\n    }\n  })\n}\nexport default coreference"],"mappings":"AAAA,OAAOA,SAAS,MAAM,iBAAiB;AACvC,OAAOC,OAAO,MAAM,eAAe;AACnC;AACA,SAASC,YAAY,QAAQ,UAAU;AAEvC,MAAMC,YAAY,GAAG,SAAAA,CAAUC,IAAI,EAAEC,CAAC,EAAE;EACtC,IAAIA,CAAC,IAAIA,CAAC,CAACC,KAAK,EAAE;IAChB;IACA,IAAIC,IAAI,GAAGH,IAAI,CAACI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC1BD,IAAI,CAACE,SAAS,GAAGJ,CAAC,CAACK,IAAI,CAAC,CAAC,CAAC;EAC5B;AACF,CAAC;AAED,MAAMC,QAAQ,GAAG,SAAAA,CAAUN,CAAC,EAAEO,EAAE,EAAE;EAChC;EACA,IAAIC,CAAC,GAAGR,CAAC,CAACS,MAAM,CAAC,CAAC;EAClB,IAAIC,GAAG,GAAGH,EAAE,CAACC,CAAC,CAAC;EACf,IAAIE,GAAG,CAACT,KAAK,EAAE;IACb,OAAOS,GAAG;EACZ;EACA;EACAF,CAAC,GAAGX,YAAY,CAACG,CAAC,CAAC;EACnBU,GAAG,GAAGH,EAAE,CAACC,CAAC,CAAC;EACX,IAAIE,GAAG,CAACT,KAAK,EAAE;IACb,OAAOS,GAAG;EACZ;EACA;EACAF,CAAC,GAAGX,YAAY,CAACW,CAAC,CAAC;EACnBE,GAAG,GAAGH,EAAE,CAACC,CAAC,CAAC;EACX,IAAIE,GAAG,CAACT,KAAK,EAAE;IACb,OAAOS,GAAG;EACZ;EACA,OAAOV,CAAC,CAACW,IAAI,CAAC,CAAC;AACjB,CAAC;AAED,MAAMC,WAAW,GAAG,SAAAA,CAAUC,IAAI,EAAE;EAClC,IAAIC,QAAQ,GAAGD,IAAI,CAACC,QAAQ,CAAC,CAAC,CAACC,EAAE,CAAC,oDAAoD,CAAC;EACvFD,QAAQ,CAACE,OAAO,CAACjB,IAAI,IAAI;IACvB,IAAIW,GAAG,GAAG,IAAI;IACd;IACA,IAAIX,IAAI,CAACkB,GAAG,CAAC,cAAc,CAAC,EAAE;MAC5BP,GAAG,GAAGJ,QAAQ,CAACP,IAAI,EAAGC,CAAC,IAAKL,SAAS,CAACK,CAAC,EAAE,GAAG,CAAC,CAAC;IAChD,CAAC,MAAM,IAAID,IAAI,CAACkB,GAAG,CAAC,gBAAgB,CAAC,EAAE;MACrCP,GAAG,GAAGJ,QAAQ,CAACP,IAAI,EAAGC,CAAC,IAAKL,SAAS,CAACK,CAAC,EAAE,GAAG,CAAC,CAAC;IAChD,CAAC,MAAM,IAAID,IAAI,CAACkB,GAAG,CAAC,qBAAqB,CAAC,EAAE;MAC1CP,GAAG,GAAGJ,QAAQ,CAACP,IAAI,EAAEH,OAAO,CAAC;IAC/B;IACA,IAAIc,GAAG,IAAIA,GAAG,CAACT,KAAK,EAAE;MACpBH,YAAY,CAACC,IAAI,EAAEW,GAAG,CAAC;IACzB;EACF,CAAC,CAAC;AACJ,CAAC;AACD,eAAeE,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}