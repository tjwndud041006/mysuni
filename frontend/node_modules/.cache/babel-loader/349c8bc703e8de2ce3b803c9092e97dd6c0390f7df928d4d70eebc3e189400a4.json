{"ast":null,"code":"import grad from 'grad-school';\nimport fmt from './02-fmt.js';\nimport validate from './01-validate.js';\n\n// 'fill-down' parent logic inference\nconst compute = function (allTags) {\n  // setup graph-lib format\n  const flatList = Object.keys(allTags).map(k => {\n    let o = allTags[k];\n    const props = {\n      not: new Set(o.not),\n      also: o.also,\n      is: o.is,\n      novel: o.novel\n    };\n    return {\n      id: k,\n      parent: o.is,\n      props,\n      children: []\n    };\n  });\n  const graph = grad(flatList).cache().fillDown();\n  return graph.out('array');\n};\nconst fromUser = function (tags) {\n  Object.keys(tags).forEach(k => {\n    tags[k] = Object.assign({}, tags[k]);\n    tags[k].novel = true;\n  });\n  return tags;\n};\nconst addTags = function (tags, already) {\n  // are these tags internal ones, or user-generated?\n  if (Object.keys(already).length > 0) {\n    tags = fromUser(tags);\n  }\n  tags = validate(tags, already);\n  let allTags = Object.assign({}, already, tags);\n  // do some basic setting-up\n  // 'fill-down' parent logic\n  const nodes = compute(allTags);\n  // convert it to our final format\n  const res = fmt(nodes);\n  return res;\n};\nexport default addTags;","map":{"version":3,"names":["grad","fmt","validate","compute","allTags","flatList","Object","keys","map","k","o","props","not","Set","also","is","novel","id","parent","children","graph","cache","fillDown","out","fromUser","tags","forEach","assign","addTags","already","length","nodes","res"],"sources":["/Users/seojuyoung/sunic/project/frontend/node_modules/compromise/src/1-one/tag/methods/addTags/index.js"],"sourcesContent":["import grad from 'grad-school'\nimport fmt from './02-fmt.js'\nimport validate from './01-validate.js'\n\n// 'fill-down' parent logic inference\nconst compute = function (allTags) {\n  // setup graph-lib format\n  const flatList = Object.keys(allTags).map(k => {\n    let o = allTags[k]\n    const props = { not: new Set(o.not), also: o.also, is: o.is, novel: o.novel }\n    return { id: k, parent: o.is, props, children: [] }\n  })\n  const graph = grad(flatList).cache().fillDown()\n  return graph.out('array')\n}\n\nconst fromUser = function (tags) {\n  Object.keys(tags).forEach(k => {\n    tags[k] = Object.assign({}, tags[k])\n    tags[k].novel = true\n  })\n  return tags\n}\n\nconst addTags = function (tags, already) {\n  // are these tags internal ones, or user-generated?\n  if (Object.keys(already).length > 0) {\n    tags = fromUser(tags)\n  }\n  tags = validate(tags, already)\n\n  let allTags = Object.assign({}, already, tags)\n  // do some basic setting-up\n  // 'fill-down' parent logic\n  const nodes = compute(allTags)\n  // convert it to our final format\n  const res = fmt(nodes)\n  return res\n}\nexport default addTags\n"],"mappings":"AAAA,OAAOA,IAAI,MAAM,aAAa;AAC9B,OAAOC,GAAG,MAAM,aAAa;AAC7B,OAAOC,QAAQ,MAAM,kBAAkB;;AAEvC;AACA,MAAMC,OAAO,GAAG,SAAAA,CAAUC,OAAO,EAAE;EACjC;EACA,MAAMC,QAAQ,GAAGC,MAAM,CAACC,IAAI,CAACH,OAAO,CAAC,CAACI,GAAG,CAACC,CAAC,IAAI;IAC7C,IAAIC,CAAC,GAAGN,OAAO,CAACK,CAAC,CAAC;IAClB,MAAME,KAAK,GAAG;MAAEC,GAAG,EAAE,IAAIC,GAAG,CAACH,CAAC,CAACE,GAAG,CAAC;MAAEE,IAAI,EAAEJ,CAAC,CAACI,IAAI;MAAEC,EAAE,EAAEL,CAAC,CAACK,EAAE;MAAEC,KAAK,EAAEN,CAAC,CAACM;IAAM,CAAC;IAC7E,OAAO;MAAEC,EAAE,EAAER,CAAC;MAAES,MAAM,EAAER,CAAC,CAACK,EAAE;MAAEJ,KAAK;MAAEQ,QAAQ,EAAE;IAAG,CAAC;EACrD,CAAC,CAAC;EACF,MAAMC,KAAK,GAAGpB,IAAI,CAACK,QAAQ,CAAC,CAACgB,KAAK,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC;EAC/C,OAAOF,KAAK,CAACG,GAAG,CAAC,OAAO,CAAC;AAC3B,CAAC;AAED,MAAMC,QAAQ,GAAG,SAAAA,CAAUC,IAAI,EAAE;EAC/BnB,MAAM,CAACC,IAAI,CAACkB,IAAI,CAAC,CAACC,OAAO,CAACjB,CAAC,IAAI;IAC7BgB,IAAI,CAAChB,CAAC,CAAC,GAAGH,MAAM,CAACqB,MAAM,CAAC,CAAC,CAAC,EAAEF,IAAI,CAAChB,CAAC,CAAC,CAAC;IACpCgB,IAAI,CAAChB,CAAC,CAAC,CAACO,KAAK,GAAG,IAAI;EACtB,CAAC,CAAC;EACF,OAAOS,IAAI;AACb,CAAC;AAED,MAAMG,OAAO,GAAG,SAAAA,CAAUH,IAAI,EAAEI,OAAO,EAAE;EACvC;EACA,IAAIvB,MAAM,CAACC,IAAI,CAACsB,OAAO,CAAC,CAACC,MAAM,GAAG,CAAC,EAAE;IACnCL,IAAI,GAAGD,QAAQ,CAACC,IAAI,CAAC;EACvB;EACAA,IAAI,GAAGvB,QAAQ,CAACuB,IAAI,EAAEI,OAAO,CAAC;EAE9B,IAAIzB,OAAO,GAAGE,MAAM,CAACqB,MAAM,CAAC,CAAC,CAAC,EAAEE,OAAO,EAAEJ,IAAI,CAAC;EAC9C;EACA;EACA,MAAMM,KAAK,GAAG5B,OAAO,CAACC,OAAO,CAAC;EAC9B;EACA,MAAM4B,GAAG,GAAG/B,GAAG,CAAC8B,KAAK,CAAC;EACtB,OAAOC,GAAG;AACZ,CAAC;AACD,eAAeJ,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}