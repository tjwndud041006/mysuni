{"ast":null,"code":"import consider from './find/01-consider.js';\n\n// some rules are also good in reverse\nconst shareBackward = function (fwd, rev, opts) {\n  let both = {};\n  let pending = rev.slice(0);\n  let finished = [];\n  let rules = Object.entries(fwd).reverse();\n  rules.forEach(a => {\n    let rule = {\n      from: a[1],\n      to: a[0]\n    };\n    if (!rule.to) {\n      return;\n    }\n    let result = consider(rule, rev, opts);\n    // did it do okay?\n    if (result.percent > opts.threshold) {\n      // move it to 'both' rules\n      both[rule.to] = rule.from;\n      delete fwd[rule.to];\n      // update finished/pending lists\n      pending = pending.filter(a => {\n        if (result.clear.has(a[0])) {\n          finished.push(a);\n          return false;\n        }\n        return true;\n      });\n    }\n  });\n  return {\n    fwd,\n    both,\n    revPairs: {\n      pending,\n      finished\n    }\n  };\n};\nexport default shareBackward;","map":{"version":3,"names":["consider","shareBackward","fwd","rev","opts","both","pending","slice","finished","rules","Object","entries","reverse","forEach","a","rule","from","to","result","percent","threshold","filter","clear","has","push","revPairs"],"sources":["/Users/seojuyoung/sunic/project/frontend/node_modules/suffix-thumb/src/learn/02-share-back.js"],"sourcesContent":["import consider from './find/01-consider.js'\n\n// some rules are also good in reverse\nconst shareBackward = function (fwd, rev, opts) {\n  let both = {}\n  let pending = rev.slice(0)\n  let finished = []\n  let rules = Object.entries(fwd).reverse()\n  rules.forEach(a => {\n    let rule = { from: a[1], to: a[0] }\n    if (!rule.to) {\n      return\n    }\n    let result = consider(rule, rev, opts)\n    // did it do okay?\n    if (result.percent > opts.threshold) {\n      // move it to 'both' rules\n      both[rule.to] = rule.from\n      delete fwd[rule.to]\n      // update finished/pending lists\n      pending = pending.filter(a => {\n        if (result.clear.has(a[0])) {\n          finished.push(a)\n          return false\n        }\n        return true\n      })\n    }\n  })\n  return {\n    fwd,\n    both,\n    revPairs: {\n      pending,\n      finished\n    }\n  }\n}\nexport default shareBackward"],"mappings":"AAAA,OAAOA,QAAQ,MAAM,uBAAuB;;AAE5C;AACA,MAAMC,aAAa,GAAG,SAAAA,CAAUC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EAC9C,IAAIC,IAAI,GAAG,CAAC,CAAC;EACb,IAAIC,OAAO,GAAGH,GAAG,CAACI,KAAK,CAAC,CAAC,CAAC;EAC1B,IAAIC,QAAQ,GAAG,EAAE;EACjB,IAAIC,KAAK,GAAGC,MAAM,CAACC,OAAO,CAACT,GAAG,CAAC,CAACU,OAAO,CAAC,CAAC;EACzCH,KAAK,CAACI,OAAO,CAACC,CAAC,IAAI;IACjB,IAAIC,IAAI,GAAG;MAAEC,IAAI,EAAEF,CAAC,CAAC,CAAC,CAAC;MAAEG,EAAE,EAAEH,CAAC,CAAC,CAAC;IAAE,CAAC;IACnC,IAAI,CAACC,IAAI,CAACE,EAAE,EAAE;MACZ;IACF;IACA,IAAIC,MAAM,GAAGlB,QAAQ,CAACe,IAAI,EAAEZ,GAAG,EAAEC,IAAI,CAAC;IACtC;IACA,IAAIc,MAAM,CAACC,OAAO,GAAGf,IAAI,CAACgB,SAAS,EAAE;MACnC;MACAf,IAAI,CAACU,IAAI,CAACE,EAAE,CAAC,GAAGF,IAAI,CAACC,IAAI;MACzB,OAAOd,GAAG,CAACa,IAAI,CAACE,EAAE,CAAC;MACnB;MACAX,OAAO,GAAGA,OAAO,CAACe,MAAM,CAACP,CAAC,IAAI;QAC5B,IAAII,MAAM,CAACI,KAAK,CAACC,GAAG,CAACT,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;UAC1BN,QAAQ,CAACgB,IAAI,CAACV,CAAC,CAAC;UAChB,OAAO,KAAK;QACd;QACA,OAAO,IAAI;MACb,CAAC,CAAC;IACJ;EACF,CAAC,CAAC;EACF,OAAO;IACLZ,GAAG;IACHG,IAAI;IACJoB,QAAQ,EAAE;MACRnB,OAAO;MACPE;IACF;EACF,CAAC;AACH,CAAC;AACD,eAAeP,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}